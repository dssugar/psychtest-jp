/**
 * Satisfaction With Life Scale (SWLS) - Scoring & Configuration
 *
 * SWLS の採点とレベル判定
 *
 * スコア範囲: 5-35点
 * - 5-9点: 極めて不満足
 * - 10-14点: 不満足
 * - 15-19点: やや不満足
 * - 20点: 中程度
 * - 21-25点: やや満足
 * - 26-30点: 満足
 * - 31-35点: 極めて満足
 *
 * @reference Diener, E., Emmons, R. A., Larsen, R. J., & Griffin, S. (1985).
 *            The Satisfaction With Life Scale. Journal of Personality Assessment,
 *            49(1), 71-75.
 */

import {
  swlsQuestions,
  scaleOptions,
  scaleInfo,
} from "@/data/swls-questions";
import type { TestConfig } from "./types";
import { validateSwlsAnswerPattern } from "./validation";
import type { DimensionData } from "@/lib/og-design/types";
import { TEST_COLOR_MAP } from "@/lib/og-design/constants";

// ============================================================================
// Types & Interfaces
// ============================================================================

/**
 * SWLS の結果型
 */
export interface SwlsResult {
  rawScore: number;
  percentageScore: number;
  level:
    | "veryLow"
    | "low"
    | "slightlyBelow"
    | "neutral"
    | "slightlyAbove"
    | "high"
    | "veryHigh";
  levelLabel: string;
  // NOTE: interpretation は保存せず、表示時に getInterpretation() で動的生成
}

// ============================================================================
// Scoring Logic
// ============================================================================

/**
 * SWLS スコアを計算
 * @param answers 回答配列（1-7の値）
 * @returns 計算結果
 */
export function calculateSwlsScore(answers: number[]): SwlsResult {
  if (answers.length !== 5) {
    throw new Error("SWLS requires exactly 5 answers");
  }

  // SWLSには逆転項目なし、そのまま合計
  const rawScore = answers.reduce((sum, score) => sum + score, 0);

  // パーセンテージ計算（5-35 → 0-100%）
  const min = 5;
  const max = 35;
  const percentageScore = ((rawScore - min) / (max - min)) * 100;

  // レベル判定
  let level: SwlsResult["level"];
  let levelLabel: string;

  if (rawScore === 35) {
    level = "veryHigh";
    levelLabel = "極めて満足";
  } else if (rawScore >= 30) {
    level = "high";
    levelLabel = "満足";
  } else if (rawScore >= 25) {
    level = "slightlyAbove";
    levelLabel = "やや満足";
  } else if (rawScore >= 20) {
    level = "neutral";
    levelLabel = "中程度";
  } else if (rawScore >= 15) {
    level = "slightlyBelow";
    levelLabel = "やや不満足";
  } else if (rawScore >= 10) {
    level = "low";
    levelLabel = "不満足";
  } else {
    level = "veryLow";
    levelLabel = "極めて不満足";
  }

  return {
    rawScore,
    percentageScore,
    level,
    levelLabel,
  };
}

/**
 * 解釈文を取得
 * 表示時に動的生成するため、localStorage に保存しない
 */
export function getInterpretation(level: SwlsResult["level"]): string {
  switch (level) {
    case "veryHigh":
      return getVeryHighInterpretation();
    case "high":
      return getHighInterpretation();
    case "slightlyAbove":
      return getSlightlyAboveInterpretation();
    case "neutral":
      return getNeutralInterpretation();
    case "slightlyBelow":
      return getSlightlyBelowInterpretation();
    case "low":
      return getLowInterpretation();
    case "veryLow":
      return getVeryLowInterpretation();
  }
}

/**
 * SWLS 回答バリデーション
 * 中立点（4）をすべて選択している場合は許容
 */
function validateAnswerPattern(answers: number[]) {
  return validateSwlsAnswerPattern(answers);
}

// =========================================
// 解釈コンテンツ（Phase 4で生成）
// =========================================

function getVeryLowInterpretation(): string {
  return `
【要約】
人生に対して極めて強い不満を感じている状態です（スコア: 5-9点）。現在の生活のほとんどの側面において満足を得られておらず、理想と現実の大きなギャップに苦しんでいる可能性があります。日常生活に支障をきたしている場合もあり、専門家のサポートを検討すべきレベルです。

【日常生活への影響】
人生全体への不満が対人関係にも影響し、他者との交流に消極的になったり、孤立感を感じたりすることがあります。「自分の人生はうまくいっていない」という思いから、他者と自分を比較し、劣等感を抱きやすくなります。親しい人に対しても悲観的な態度を示し、関係性に緊張が生じることがあります。

仕事や学業に対するモチベーションが著しく低下し、集中力や生産性が損なわれている可能性があります。「何をやっても意味がない」という無力感から、目標設定や将来計画を立てることが困難になります。欠勤・欠席が増加したり、パフォーマンスが低下したりすることもあります。

人生全体に対する否定的な見方が、日々の意思決定にも影響します。リスクを避ける傾向が強まり、新しい機会に挑戦することを躊躇します。また、短期的な快楽を求める行動（過度な飲酒、浪費など）に走ることもあります。

慢性的なストレスにより、睡眠障害、食欲不振、疲労感などの身体症状が現れることがあります。うつ病や不安障害を併発している可能性も高く、注意が必要です。

【心理学的背景】
研究によると、SWLSスコアが極めて低い人は、うつ病（PHQ-9）や不安障害（GAD-7）との強い負の相関を示します（r = -0.40 to -0.50）。また、自尊心の低さ、神経症傾向の高さとも関連しています。

低い人生満足度は、以下の要因から生じることが多いとされています：
1. **重大なライフイベント**: 失業、離婚、死別、病気などの喪失体験
2. **慢性的ストレス**: 貧困、家族問題、職場の人間関係
3. **性格要因**: 神経症傾向（Big Five）が高く、ネガティブな出来事に過敏
4. **認知バイアス**: ネガティブな側面にばかり注目する思考パターン

重要なのは、人生満足度は**変えられる**ということです。適切な介入（心理療法、ライフスタイル改善）により、スコアは有意に上昇することが多数の研究で示されています。

【実用的アドバイス】
**専門家への相談**
このレベルのスコアの場合、臨床心理士、公認心理師、精神科医への相談を強く推奨します。認知行動療法（CBT）、対人関係療法（IPT）などのエビデンスベースの心理療法が有効です。

**即座にできる対処法**
- 小さな目標を設定する: 「今日一日を乗り切る」という短期目標から始める
- ルーティンを保つ: 起床・就寝時刻、食事時間を一定に保ち、生活リズムを整える
- 身体を動かす: 軽い散歩（10-15分）でも気分改善効果がある
- 信頼できる人に話す: 一人で抱え込まず、家族・友人に現状を伝える

**避けるべき行動**
- アルコール・薬物での対処（依存リスク、症状悪化）
- 重大な人生の決断（離婚、退職など）を急ぐ
- 社会的孤立を深める
- 「自分が悪い」と責め続ける

**緊急時**
自殺念慮がある場合は、直ちに以下に連絡してください：
- いのちの電話: 0570-783-556（ナビダイヤル）
- 精神科救急: 各都道府県の精神科救急医療体制
  `.trim();
}

function getLowInterpretation(): string {
  return `
【要約】
人生に対して不満を感じている状態です（スコア: 10-14点）。現在の生活に満足できておらず、多くの領域で改善が必要だと感じています。日常生活は送れていますが、慢性的な不満やストレスを抱えており、生活の質（QOL）が低下しています。積極的な対処が必要なレベルです。

【日常生活への影響】
対人関係に満足していないことが多く、孤独感や疎外感を感じることがあります。他者との交流はありますが、深いつながりや親密さを感じにくい状態です。「誰も自分を理解してくれない」という思いから、表面的な付き合いに留まりがちです。

仕事や学業に対する満足度が低く、「本当にやりたいことではない」「このままでいいのか」という疑問を抱えています。モチベーションの維持が困難で、惰性で続けている感覚があります。転職や進路変更を考えることが多いです。

現状に不満があるため、変化を求める一方で、リスクへの恐怖から一歩を踏み出せないジレンマに苦しみます。「変わりたいけど変われない」という葛藤が意思決定を困難にします。

慢性的なストレスにより、疲労感、頭痛、肩こり、胃腸の不調などの身体症状が現れることがあります。睡眠の質が低下し、朝起きても疲れが取れていないことが多いです。

【心理学的背景】
SWLSスコアが10-14点の範囲にある人は、米国の基準では「明らかに平均を下回る」レベルですが、日本の平均（18.9点）と比較しても低い状態です。

このレベルの人は、以下の特徴を示すことが研究で示されています：
- **ネガティブ感情の高さ**: ポジティブ感情よりネガティブ感情を頻繁に経験
- **ストレス対処の困難**: ストレスフルなイベントからの回復が遅い
- **社会的比較**: 他者と自分を比較し、劣等感を抱きやすい
- **現実と理想のギャップ**: 「こうあるべき」と「現実」の乖離が大きい

ただし、このスコア範囲でも、適切な介入（心理療法、ライフスタイル改善、社会的サポート）により、6ヶ月以内に有意なスコア上昇が見られることが多数報告されています。

【実用的アドバイス】
**セルフケアの強化**
- ストレス源の特定: 何が不満の原因かを具体的に書き出す
- 小さな変化から: 一度に全てを変えようとせず、一つの領域（例：睡眠）から改善
- ポジティブ活動の増加: 楽しめる活動（趣味、運動、社交）を意識的に増やす
- 感謝日記: 毎日3つの「良かったこと」を記録する

**対人関係の改善**
- 信頼できる人に現状を話す
- 新しいコミュニティに参加してみる（趣味のサークル、ボランティアなど）
- 既存の関係を深める努力（定期的な連絡、対面での交流）

**キャリア・生活の見直し**
- 「本当に大切なこと」を明確にする（価値観の棚卸し）
- 小さな目標設定と達成（自己効力感の回復）
- キャリアカウンセラーへの相談

**専門家への相談を検討**
以下の症状がある場合は、心理カウンセリングを推奨：
- 2週間以上続く落ち込み
- 何をしても楽しめない
- 睡眠・食欲の大きな変化
- 集中力の著しい低下
  `.trim();
}

function getSlightlyBelowInterpretation(): string {
  return `
【要約】
人生にやや不満を感じている状態です（スコア: 15-19点）。日本の平均（18.9点）に近く、多くの人が経験するレベルです。現在の生活に部分的に満足していますが、改善したい領域もあります。大きな問題はありませんが、より充実した人生を送るためには積極的な取り組みが有効です。

【日常生活への影響】
対人関係は概ね良好ですが、親密さや深いつながりに欠けると感じることがあります。表面的な付き合いは多いものの、「本当に理解し合える友人」が少ないと感じるかもしれません。孤独感を時折感じますが、社会的孤立というほどではありません。

仕事や学業は「まあまあ」のレベルで、大きな不満はないものの、情熱や達成感も限定的です。「こんなものか」と現状を受け入れつつ、「もっと違う人生もあったのでは」という疑問も抱えています。キャリアの停滞感を感じることがあります。

現状維持バイアスが強く、「今のままで悪くない」という思いから、新しい挑戦を躊躇します。リスクを避け、安定を選ぶ傾向があります。大きな決断（転職、引っ越し、結婚など）を先延ばしにすることが多いです。

健康状態は概ね良好ですが、ストレスが溜まると疲労感や軽い不調（頭痛、胃もたれ）を感じます。運動不足や不規則な生活習慣が気になっています。

【心理学的背景】
SWLSスコア15-19点は、日本人の平均的な範囲に含まれます（平均18.9点）。米国の基準では「やや平均を下回る」とされますが、文化差を考慮すると、日本では「普通」と言えます。

このレベルの人の特徴：
- **現状に適応**: 大きな問題はないが、最適でもない状態に慣れている
- **変化への抵抗**: 「今が悪くない」ため、改善努力を後回しにする
- **ポジティブ・ネガティブが混在**: 良い面も悪い面もある人生と認識
- **性格要因**: Big Fiveの「神経症傾向」がやや高め、「外向性」「誠実性」が平均程度

**改善可能性**: このレベルの人は、小さなライフスタイル変更（運動習慣、社会活動、感謝の実践）だけで、6-12ヶ月以内に21-25点（やや満足）レベルに達することが多数報告されています。「少しの努力で大きな変化」が期待できるゾーンです。

【実用的アドバイス】
**ポジティブ心理学の実践**
- 強みの活用: VIA Character Strengths診断で自分の強みを知り、日常で意識的に使う
- 感謝の習慣: 毎晩3つの「良かったこと」を書き出す（2週間で効果実感）
- 親切行為: 週に5回、小さな親切をする（他者への貢献感が満足度を高める）
- 目標設定: SMART目標（具体的、測定可能、達成可能、関連性、期限）を設定

**ソーシャル・コネクション**
- 既存の友人関係を深める（月1回の食事、電話）
- 新しいコミュニティに参加（趣味のサークル、勉強会、ボランティア）
- 「弱さを見せる」勇気を持つ（深い関係性は相互の開示から生まれる）

**キャリア・生活の充実**
- 仕事に「クラフティング」を導入（自分なりの意味づけ、やりがいの発見）
- スキルアップ、学び直し（新しい挑戦がモチベーションを高める）
- ワークライフバランスの見直し

**ライフスタイル**
- 運動: 週3回、30分の有酸素運動（幸福度向上に最も効果的）
- 睡眠: 7-8時間の質の高い睡眠
- 栄養: バランスの取れた食事（特にオメガ3脂肪酸、ビタミンD）

**避けるべき罠**
- 「これで十分」と諦める
- 他者との比較で自己価値を測る
- 変化を恐れて現状維持に固執する
  `.trim();
}

function getNeutralInterpretation(): string {
  return `
【要約】
人生の満足度が平均的な状態です（スコア: 20-24点）。日本人の平均（18.9点）よりやや高く、米国では「やや平均を上回る」レベルです。現在の生活に概ね満足していますが、さらに充実させる余地もあります。安定した状態ですが、意識的な努力により、より高い幸福度を目指すことができます。

【日常生活への影響】
対人関係は良好で、家族や友人とのつながりを大切にしています。深い関係性もいくつかあり、必要な時にはサポートを得られます。ただし、新しい出会いや関係の深化にはやや消極的な面もあります。

仕事や学業に対して概ね満足しており、適度なモチベーションを持って取り組んでいます。「天職」とまでは言えないかもしれませんが、意味ややりがいを見出せています。キャリアの方向性も明確で、着実に前進している感覚があります。

バランスの取れた意思決定ができており、短期的快楽と長期的目標を適度に両立させています。リスクとリターンを冷静に評価し、合理的な選択を行えます。大きな決断も、適切な情報収集と熟考の後に下すことができます。

心身ともに健康で、ストレス対処能力も適切に機能しています。定期的な運動や趣味の時間を確保し、ワークライフバランスを保てています。睡眠の質も良好で、日中のエネルギーレベルも安定しています。

【心理学的背景】
SWLSスコア20-24点は、幸福研究において「安定した幸福」のベースラインと見なされます。このレベルの人は、以下の特徴を持つことが研究で示されています：

- **レジリエンス**: ストレスフルなイベントからの回復が比較的早い
- **ポジティブ感情とネガティブ感情のバランス**: ネガティブ感情も経験するが、ポジティブ感情が上回る
- **性格要因**: Big Fiveの「外向性」「協調性」「誠実性」が平均以上、「神経症傾向」が平均以下
- **社会的つながり**: 良質な人間関係を持ち、社会的サポートが得られる

**さらなる向上の可能性**: このレベルから26-30点（満足）レベルに上がるには、「人生の意味」「自己実現」「貢献」といった、より高次の欲求の充足が鍵となります。マズローの欲求階層でいえば、「自己実現欲求」の領域です。

【実用的アドバイス】
**幸福度をさらに高める戦略**

**1. 人生の意味と目的の追求**
- 自己実現: 「本当にやりたいこと」を明確にし、一歩踏み出す
- 貢献: 自分の能力を社会のために役立てる（ボランティア、メンタリング）
- 価値観の明確化: 自分が大切にする価値観を言語化し、それに沿った生活をする

**2. 関係性の深化**
- 質的な時間: 量より質を重視した対人交流
- 脆弱性の開示: 親しい人に本音を話す勇気を持つ
- 新しい出会い: 価値観の合う人々との出会いを求める

**3. 成長マインドセット**
- 学び続ける: 新しいスキル、知識の習得
- 挑戦: 快適ゾーンから一歩出る経験（例：海外旅行、新しい趣味）
- 失敗を恐れない: 失敗は成長の機会と捉える

**4. マインドフルネスとフロー体験**
- 今ここに集中: 瞑想、マインドフルネスの実践
- フロー活動: 没頭できる活動を増やす（趣味、スポーツ、創作活動）

**5. 感謝と楽観性**
- 感謝の手紙: 大切な人に感謝を伝える
- 楽観的思考: 未来に希望を持ち、ポジティブな解釈を心がける

**維持すべき習慣**
- 現在の良好なライフスタイル（運動、睡眠、栄養）を継続
- 社会的つながりを大切にする
- ストレス管理を継続
  `.trim();
}

function getSlightlyAboveInterpretation(): string {
  return `
【要約】
人生にやや満足している状態です（スコア: 25-29点）。米国の基準では「平均を上回る」、日本と比較すると「かなり高い」満足度です。現在の生活に概ね満足しており、ポジティブな感情が優勢です。充実した人間関係、やりがいのある仕事、良好な健康状態を維持しています。さらに幸福度を高める余地はありますが、既に高いウェルビーイングの状態です。

【日常生活への影響】
深く充実した人間関係を持ち、家族や友人との強い絆を感じています。相互にサポートし合える関係性があり、孤独感をほとんど感じません。他者との交流を楽しみ、新しい出会いにも積極的です。共感力が高く、他者の幸福にも関心を持っています。

仕事や学業に対して高い満足度を持ち、意味ややりがいを強く感じています。自分の強みを活かし、貢献している実感があります。目標達成に向けて主体的に取り組み、成長を実感しています。ワークライフバランスも良好で、仕事と私生活の両方を楽しんでいます。

自信を持って意思決定を行い、自分の選択に責任を持てています。短期的快楽と長期的目標をバランスよく追求し、衝動的な決断を避けることができます。価値観に沿った選択をしており、後悔することが少ないです。

心身ともに健康で、エネルギーレベルが高い状態です。ストレス対処能力が高く、困難な状況でもレジリエンス（回復力）を発揮できます。定期的な運動、質の高い睡眠、バランスの取れた食事を維持し、セルフケアを大切にしています。

【心理学的背景】
SWLSスコア25-29点は、幸福研究において「高い幸福度」と分類されます。このレベルの人は、ポジティブ心理学で「フラリッシング（flourishing）」と呼ばれる状態に近く、以下の特徴を持ちます：

- **ポジティブ感情の優位**: ネガティブ感情よりポジティブ感情を頻繁に経験（比率3:1以上）
- **強固な社会的つながり**: 良質な人間関係が複数ある
- **自己決定感**: 自分の人生を主体的にコントロールしている感覚
- **性格要因**: Big Fiveの「外向性」「協調性」「誠実性」が高く、「神経症傾向」が低い
- **エウダイモニア的幸福**: 快楽（hedonia）だけでなく、意味や成長（eudaimonia）も追求している

**健康への好影響**: 高い人生満足度は、身体的健康（免疫機能、心血管系）、寿命の延伸と正の相関があることが複数の縦断研究で示されています。

【実用的アドバイス】
**現在の幸福を維持・深化させる**

**1. 幸福の持続可能性**
- 快楽適応の回避: 同じことに慣れて満足度が下がらないよう、定期的に新しい経験を取り入れる
- 感謝の習慣: 当たり前のことに感謝し、「慣れ」による満足度低下を防ぐ
- 関係性の維持: 親しい人との関係を当たり前と思わず、継続的に投資する

**2. より深い幸福（エウダイモニア）の追求**
- 人生の意味: 自分より大きな何か（社会、次世代、価値観）に貢献する
- 強みの活用: VIA強みを日常で意識的に使う
- 成長の継続: 学び、挑戦し続けることで停滞を避ける

**3. 他者の幸福への貢献**
- ペイフォワード: 自分が受けた恩を次の人に渡す
- メンタリング: 自分の経験や知識を若い世代にシェアする
- コミュニティへの貢献: ボランティア、社会活動への参加

**4. レジリエンスの維持**
- ストレス管理: 高い幸福度を維持するため、ストレス対処法を継続
- マインドフルネス: 今この瞬間を大切にする実践
- セルフケア: 運動、睡眠、栄養の継続

**注意すべき罠**
- 完璧主義に陥る（「もっと幸福にならなければ」というプレッシャー）
- 他者との比較で満足度を測る
- 幸福を当たり前と思い、感謝を忘れる

**さらなる向上**
30-35点（極めて満足）に達するには、「自己超越」（self-transcendence）、すなわち自分を超えた価値や意味への献身が鍵となります。
  `.trim();
}

function getHighInterpretation(): string {
  return `
【要約】
人生に満足している状態です（スコア: 30-34点）。米国でも「平均を大きく上回る」、日本では「極めて高い」満足度です。人生のほとんどの領域において充実を感じており、強い幸福感を持っています。困難があっても前向きに対処でき、総合的に人生を肯定的に捉えています。この状態を維持し、さらに深めることが目標となります。

【日常生活への影響】
非常に充実した人間関係を持ち、愛情、親密さ、相互サポートを日常的に経験しています。家族、友人、コミュニティとの強い絆があり、孤独を感じることはほとんどありません。他者への共感と思いやりが深く、人間関係に喜びと意味を見出しています。新しい出会いにも開かれており、人脈が自然と広がります。

仕事や学業が人生の重要な意味の源となっており、天職感を持っています。自分の能力を最大限に発揮し、社会に貢献している実感があります。挑戦を楽しみ、成長を続けています。ワークライフバランスも理想的で、仕事と私生活が相乗効果を生んでいます。

価値観が明確で、それに基づいた一貫性のある意思決定ができています。直感と理性をバランスよく使い、自信を持って選択できます。失敗しても学びと捉え、後悔よりも成長を選びます。長期的視点を持ち、衝動的な決断を避けられます。

心身ともに極めて健康で、高いエネルギーと活力を持っています。ストレスレジリエンスが非常に高く、困難な状況でも冷静に対処できます。セルフケアが生活に統合されており、意識せずとも健康的な習慣を維持しています。

【心理学的背景】
SWLSスコア30-34点は、幸福研究において「非常に高い幸福度」と分類され、ポジティブ心理学の「フラリッシング（flourishing）」の典型例です。

このレベルの人の特徴：
- **PERMA理論の充足**: Positive emotion（ポジティブ感情）、Engagement（没頭）、Relationships（人間関係）、Meaning（意味）、Accomplishment（達成）の全てが高い
- **自己決定理論の充足**: 自律性、有能感、関係性の3つの基本的心理的欲求が満たされている
- **ポジティブ感情比**: ネガティブ1に対してポジティブ5以上（フレドリクソンの「拡張-形成理論」）
- **性格**: Big Fiveの理想的プロファイル（外向性高、協調性高、誠実性高、神経症傾向低、経験への開放性高）

**縦断研究の知見**: 高い人生満足度を持つ人は、10-20年後も高い満足度を維持する傾向があり、また身体的健康、長寿、キャリア成功の予測因子となることが示されています。

【実用的アドバイス】
**高い幸福を持続させる**

**1. 感謝と謙虚さ**
- 当たり前に感謝: 現在の幸福を当然と思わず、日々感謝する
- 謙虚さ: 自分一人の力ではなく、他者のサポートがあっての幸福と認識する
- 幸運への感謝: 運の良さを認め、それを他者に還元する意識

**2. 幸福の分かち合い**
- ロールモデル: 周囲の人に前向きな影響を与える
- メンタリング: 自分の経験を次世代にシェアする
- 社会貢献: 時間、お金、スキルを社会のために使う

**3. 継続的成長**
- 新しい挑戦: 快適ゾーンに留まらず、成長し続ける
- 学びの継続: 知的好奇心を大切にする
- 謙虚な向上心: 完璧ではなく、より良くなることを目指す

**4. レジリエンスの備え**
- 逆境への準備: 人生には浮き沈みがあることを受け入れる
- マインドフルネス: 今を大切にし、未来への不安に囚われない
- サポートネットワーク: 困難時に頼れる関係性を維持

**5. バランスの維持**
- 完璧主義の回避: 「もっと幸福に」という強迫観念を持たない
- 自己慈悲: 失敗や弱さも受け入れる
- プロセスを楽しむ: 結果だけでなく過程も大切にする

**スピリチュアルな成長**
- 自己を超えた価値（美、真理、善）への献身
- 宗教・哲学・瞑想などによる深い意味の探求
- 自然とのつながり、宇宙の一部であるという感覚
  `.trim();
}

function getVeryHighInterpretation(): string {
  return `
【要約】
人生に対して極めて高い満足を感じている状態です（スコア: 35点/35点満点）。人生のすべての項目で最高評価をつけており、理想と現実が一致している稀有な状態です。深い幸福感、充実感、人生の意味を感じています。ただし、完璧主義や天井効果の可能性もあり、この状態の意味を深く理解することが重要です。

【日常生活への影響】
極めて深く充実した人間関係を持ち、愛情、信頼、相互理解に満ちた絆を日常的に経験しています。他者との交流が人生の大きな喜びの源となっており、与えることと受け取ることのバランスが完璧に取れています。コミュニティの中心的存在として、多くの人に前向きな影響を与えています。

仕事や学業が単なる義務ではなく、人生の使命（calling）となっています。自分の才能を最大限に発揮し、社会に大きく貢献している実感があります。毎日が充実しており、Monday blues（月曜日の憂鬱）とは無縁です。仕事と私生活が完全に統合され、人生全体が一つの調和したシステムとして機能しています。

自分の価値観、直感、理性が完全に一致しており、迷いなく決断できます。選択に後悔することはほとんどなく、仮に予期せぬ結果になっても学びとして受け入れられます。長期的視野と短期的満足が矛盾せず、持続可能な幸福を築けています。

心身ともに最高の状態で、生命力にあふれています。ストレスをエネルギーに変える能力があり、困難を成長の機会と捉えます。セルフケアが自然と統合されており、健康的なライフスタイルが習慣化しています。

【心理学的背景】
SWLSで満点（35点）を取ることは統計的に稀で、一般集団では約1-2%程度と推定されます。このスコアは以下の可能性を示唆します：

**1. 真の極度の幸福**
ポジティブ心理学の最高レベル「フラリッシング」の極致。自己実現（マズロー）、統合された人格（ユング）の達成。PERMA理論のすべての要素が最高レベルで満たされている状態です。

**2. ポジティブバイアス**
社会的望ましさバイアス（良く見せたい）、自己欺瞞（現実を直視していない）、一時的な高揚状態（ハネムーン効果）の可能性もあります。

**3. 完璧主義の反映**
「完璧でなければ」という強迫観念から、全て最高評価をつける、現実的自己評価ができていない可能性があります。

**研究の知見**: 極度に高いSWLSスコアは、必ずしも最適ではないことが示唆されています。スコア26-30点の人の方が、創造性、問題解決能力、社会的感受性が高い場合があります（Oishi et al., 2007）。

【実用的アドバイス】
**このスコアの意味を理解する**

**1. 自己反省**
以下の質問に正直に答えてみてください：
- このスコアは一時的な高揚状態ではないか？
- 人生の困難な側面から目を背けていないか？
- 社会的に「良く見せたい」という気持ちがなかったか？
- 本当に全ての項目で「極めて満足」と言えるか？

**2. 真の幸福の場合**

素晴らしいことです！以下を大切にしてください：

**感謝と謙虚さ**
- この幸福を当然と思わず、日々感謝する
- 運の良さ、他者のサポートを認識する
- 幸福を独占せず、分かち合う

**持続可能性**
- 人生には浮き沈みがあることを受け入れる準備
- レジリエンスを維持（困難への対処力）
- 快楽適応を避ける（慣れによる満足度低下の防止）

**貢献と成長**
- 自分の幸福を他者の幸福のために使う
- メンタリング、社会貢献
- 継続的な学びと成長（停滞は退歩）

**3. バイアスの可能性がある場合**

**より現実的な自己評価**
- 1-2週間後に再度受検してみる
- 人生の各領域（仕事、健康、人間関係、財政など）を個別に評価
- 信頼できる人に客観的な意見を求める

**完璧主義の見直し**
- 「完璧」への強迫観念を手放す
- 弱さ、不完全さを受け入れる（自己慈悲）
- プロセスを楽しみ、結果に執着しない

**4. 次のステップ**

**自己超越**
- 個人の幸福を超えた、より大きな意味の追求
- 他者、社会、自然、宇宙とのつながり
- スピリチュアルな成長、哲学的探求

**幸福の質的深化**
- 快楽（hedonia）から意味（eudaimonia）へ
- 表面的な満足から深い充実感へ
- 所有から存在へ

**あなたの命は尊く、かけがえのないものです。この幸福を大切にし、周囲にも分かち合ってください。**
  `.trim();
}

// ============================================================================
// Test Configuration
// ============================================================================

/**
 * SWLS (Satisfaction With Life Scale) テスト設定
 */
export const swlsConfig: TestConfig<SwlsResult> = {
  id: "swls",
  color: "blue", // ウェルビーイング系はblueで統一
  basePath: "/swls",
  questions: swlsQuestions,
  scaleOptions,
  calculateScore: calculateSwlsScore,
  validateAnswers: validateAnswerPattern,
  scaleInfo,
  selectedButtonColor: "blue", // SWLSのみ青色ボタン

  // 結果ページ設定
  scoreDisplay: {
    type: "circle",
    maxScore: 35,
  },
  resultExtensions: {
    shareButtons: true,
  },

  // OG画像設定
  ogImage: {
    layoutType: "single",
    titleEn: "LIFE\nSATISFACTION",
    category: "人生満足度診断",
    description: "主観的幸福感の測定\n5項目で人生の充実度を評価",
    scoreDisplay: { type: "raw", min: 5, max: 35, unit: "" },
    scoreToParams: (result: SwlsResult) => ({
      score: (result?.rawScore ?? 20).toString(),
    }),
    paramsToScore: (params: URLSearchParams) => ({
      score: parseInt(params.get("score") || "20"),
    }),
  },

  // 🆕 NEW: 1次元データ生成
  getDimensions: (result: SwlsResult): DimensionData[] => {
    const min = 5;
    const max = 35;
    const rawScore = result?.rawScore ?? 20;
    const percentage = result?.percentageScore ?? ((rawScore - min) / (max - min)) * 100;

    return [{
      key: 'score',
      label: 'Total Score',
      score: rawScore,
      percentage: percentage,
      color: TEST_COLOR_MAP['blue'] || '#3b82f6',
    }];
  },
};
